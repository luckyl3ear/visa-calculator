<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Visa Quest</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        /* ğŸŒŒ ê²Œì„ ì• ë‹ˆë©”ì´ì…˜ ë°°ê²½ */
        body { 
            font-family: 'Jua', sans-serif; 
            margin: 0; padding: 20px; 
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            background-size: 200% 200%;
            animation: gradientBG 10s ease infinite;
        }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* ğŸ“± ë©”ì¸ ì•± ì»¨í…Œì´ë„ˆ */
        .app-container { 
            background-color: #ffffff; width: 100%; max-width: 500px; 
            padding: 30px; border-radius: 25px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.5), inset 0 0 0 5px #f0f0f0; 
            position: relative; overflow: hidden; 
        }
        
        h2 { text-align: center; color: #1e272e; font-size: 28px; margin-top: 0; letter-spacing: 1px; }
        
        /* ğŸŸ¢ ê²Œì„ ì§„í–‰ ë°” (0ë¶€í„° ì‹œì‘, ë¹„í–‰ê¸° ì•„ì´ì½˜ ì¶”ê°€) */
        .progress-container { width: 100%; background-color: #d2dae2; border-radius: 15px; margin-bottom: 25px; height: 18px; box-shadow: inset 0 3px 5px rgba(0,0,0,0.1); }
        .progress-bar { 
            height: 100%; background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%); 
            width: 0%; border-radius: 15px; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); 
            position: relative; 
        }
        /* ì§„í–‰ ë°” ëì— ë‹¬ë¦° ë¹„í–‰ê¸° */
        .progress-bar::after { 
            content: 'âœˆï¸'; position: absolute; right: -15px; top: -12px; font-size: 28px; 
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2));
        }

        /* ğŸ•¹ï¸ 3D ì•„ì¼€ì´ë“œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn { 
            width: 100%; padding: 18px; border: none; font-size: 20px; font-family: 'Jua', sans-serif; cursor: pointer; border-radius: 15px; margin-top: 15px; 
            transition: all 0.1s; position: relative; top: 0; 
        }
        .btn:active { top: 6px; box-shadow: none !important; }
        
        .consult-btn { background-color: #05c46b; color: white; box-shadow: 0 6px 0 #038a4b; }
        .action-btn { background-color: #0fbcf9; color: white; box-shadow: 0 6px 0 #0a86b3; }
        .secondary-btn { background-color: #d2dae2; color: #485460; box-shadow: 0 6px 0 #808e9b; }

        /* O/X í€´ì¦ˆ ì˜ì—­ */
        .question-box { 
            font-size: 24px; color: #2c3e50; min-height: 120px; margin-bottom: 30px; 
            display: flex; align-items: center; justify-content: center; text-align: center; line-height: 1.4; 
            background: #f8efba; border-radius: 20px; padding: 25px; border: 3px solid #e1b12c; 
            box-shadow: inset 0 0 15px rgba(225, 177, 44, 0.2);
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-5px); } 100% { transform: translateY(0px); } }

        .btn-group { display: flex; gap: 20px; justify-content: center; margin-bottom: 10px; }
        .ox-btn { 
            flex: 1; padding: 30px 10px; font-size: 40px; font-family: 'Jua', sans-serif; border: none; border-radius: 20px; cursor: pointer; 
            transition: all 0.1s; position: relative; top: 0; 
        }
        .ox-btn:active { top: 8px; box-shadow: none !important; }
        .btn-o { background-color: #c7ecee; color: #22a6b3; box-shadow: 0 8px 0 #7ed6df; border: 2px solid #22a6b3; }
        .btn-x { background-color: #ffcccc; color: #eb4d4b; box-shadow: 0 8px 0 #ff7979; border: 2px solid #eb4d4b; }

        /* ê²°ê³¼ ì˜ì—­ */
        .visa-badge { 
            display: block; background: linear-gradient(135deg, #f0932b 0%, #ffbe76 100%); color: white; 
            padding: 15px 25px; border-radius: 25px; font-size: 30px; margin: 20px auto; text-align: center; width: fit-content; 
            box-shadow: 0 6px 15px rgba(240, 147, 43, 0.4); animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .desc { font-size: 18px; color: #3d3d3d; line-height: 1.6; margin-bottom: 25px; background: #f1f2f6; padding: 20px; border-radius: 15px; border-left: 5px solid #ffa502; }

        /* ê³„ì‚°ê¸° í¼ */
        .form-group { margin-bottom: 18px; text-align: left; }
        label { font-size: 16px; color: #2f3640; margin-bottom: 8px; display: block; }
        select, input { 
            width: 100%; padding: 15px; font-size: 16px; font-family: 'Jua', sans-serif; border: 2px solid #dcdde1; 
            border-radius: 12px; transition: border-color 0.3s; background-color: #f5f6fa;
        }
        select:focus, input:focus { outline: none; border-color: #0fbcf9; background-color: #ffffff; }
        
        .calc-result { margin-top: 20px; padding: 20px; background-color: #e1fbef; border-radius: 15px; text-align: center; border: 3px solid #20bf6b; display: none; }
        .pass { color: #20bf6b; font-size: 1.4em; }
        .fail { color: #eb3b5a; font-size: 1.4em; }

        /* í™”ë©´ ì „í™˜ íš¨ê³¼ */
        .screen { display: none; animation: slideUp 0.4s ease-out; }
        .active-screen { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pop { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>

    <div class="app-container">
        
        <div id="quiz-screen" class="screen active-screen">
            <h2>ğŸ—ºï¸ ë¹„ì ì°¾ê¸° ëŒ€ëª¨í—˜</h2>
            <div class="progress-container"><div class="progress-bar" id="progress-bar"></div></div>
            
            <div class="question-box" id="question-text">í•œêµ­ì—ì„œ ì·¨ì—…í•˜ì—¬ ëˆì„ ë²Œ(ì˜ë¦¬í™œë™) ê³„íšì´ ìˆìœ¼ì‹ ê°€ìš”?</div>
            <div class="btn-group">
                <button class="ox-btn btn-o" onclick="answerQuiz('O')">â­• ì˜ˆ</button>
                <button class="ox-btn btn-x" onclick="answerQuiz('X')">âŒ ì•„ë‹ˆì˜¤</button>
            </div>
        </div>

        <div id="result-screen" class="screen">
            <h2>ğŸ‰ í€˜ìŠ¤íŠ¸ ì™„ë£Œ!</h2>
            <div class="visa-badge" id="visa-name">ê²°ê³¼</div>
            <div class="desc" id="visa-desc">ì„¤ëª…</div>
            
            <button id="go-calc-btn" class="btn action-btn" style="display: none;" onclick="showScreen('calc-screen')">ğŸ“Š ë‚´ F-2-7 ì ìˆ˜ ê³„ì‚°í•´ë³´ê¸°</button>
            <button class="btn consult-btn" onclick="openSMS()">ğŸ’¬ ê¹€ë™í˜„ í–‰ì •ì‚¬ì™€ ë¬¸ìë¡œ ë°”ë¡œ ìƒë‹´</button>
            <button class="btn secondary-btn" onclick="startQuiz()">ğŸ”„ ê²Œì„ ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
        </div>

        <div id="calc-screen" class="screen">
            <h2>ğŸ† F-2-7 ìš°ìˆ˜ì¸ì¬ ì±Œë¦°ì§€</h2>
            <p style="text-align:center; color:#7f8c8d; font-size:16px; margin-bottom: 20px;">80ì ì„ ë„˜ìœ¼ë©´ ë¯¸ì…˜ ì„±ê³µì…ë‹ˆë‹¤!</p>
            
            <div class="form-group">
                <label>1. ì—°ë ¹ (ì‹ ì²­ì¼ ê¸°ì¤€)</label>
                <select id="age">
                    <option value="0">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="25">25ì„¸ ~ 34ì„¸ (25ì )</option>
                    <option value="23">18~24ì„¸, 35~39ì„¸ (23ì )</option>
                    <option value="20">40ì„¸ ~ 44ì„¸ (20ì )</option>
                    <option value="15">45ì„¸ ~ 50ì„¸ (15ì )</option>
                    <option value="3">51ì„¸ ì´ìƒ (3ì )</option>
                </select>
            </div>
            <div class="form-group">
                <label>2. í•™ë ¥</label>
                <select id="edu">
                    <option value="0">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="25">ë°•ì‚¬ í•™ìœ„ (25ì )</option>
                    <option value="20">ì„ì‚¬ í•™ìœ„ (20ì )</option>
                    <option value="15">í•™ì‚¬ í•™ìœ„ (15ì )</option>
                    <option value="10">ì „ë¬¸í•™ì‚¬ í•™ìœ„ (10ì )</option>
                </select>
            </div>
            <div class="form-group">
                <label>3. í•œêµ­ì–´ ëŠ¥ë ¥ (ìë™ìœ¼ë¡œ ë†’ì€ ì ìˆ˜ ë°˜ì˜)</label>
                <select id="topik" style="margin-bottom: 8px;">
                    <option value="0">TOPIK ê¸‰ìˆ˜ ì„ íƒ</option>
                    <option value="20">TOPIK 5ê¸‰ ì´ìƒ (20ì )</option>
                    <option value="15">TOPIK 4ê¸‰ (15ì )</option>
                    <option value="10">TOPIK 3ê¸‰ (10ì )</option>
                    <option value="5">TOPIK 2ê¸‰ (5ì )</option>
                </select>
                <select id="kiip">
                    <option value="0">ì‚¬íšŒí†µí•©í”„ë¡œê·¸ë¨(KIIP) ë‹¨ê³„</option>
                    <option value="20">5ë‹¨ê³„ ì´ìˆ˜ (20ì )</option>
                    <option value="15">4ë‹¨ê³„ ì´ìˆ˜ (15ì )</option>
                    <option value="10">3ë‹¨ê³„ ì´ìˆ˜ (10ì )</option>
                    <option value="5">2ë‹¨ê³„ ì´ìˆ˜ (5ì )</option>
                </select>
            </div>
            <div class="form-group">
                <label>4. ì—°ê°„ ì†Œë“ (ì› ë‹¨ìœ„ ìˆ«ìë§Œ)</label>
                <input type="number" id="income" placeholder="ì˜ˆ: 45000000">
            </div>

            <button class="btn action-btn" onclick="calculateScore()">ğŸ¯ ë‚´ ì ìˆ˜ ê²°ê³¼ ë½‘ê¸°</button>

            <div class="calc-result" id="calc-result-box">
                <h3 style="margin-top: 0; color: #2c3e50; font-size: 26px;">ì´ì : <span id="total-score" style="color: #20bf6b;">0</span> ì </h3>
                <p id="calc-message"></p>
            </div>

            <button class="btn consult-btn" onclick="openSMS()">ğŸ’¬ ì ìˆ˜ ê²°ê³¼ë¡œ ë¬¸ì ìƒë‹´í•˜ê¸°</button>
            <button class="btn secondary-btn" onclick="showScreen('result-screen')">ğŸ”™ ì¶”ì²œ ê²°ê³¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>

    </div>

    <script>
        // --- í™”ë©´ ì „í™˜ ë¡œì§ ---
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(el => el.classList.remove('active-screen'));
            document.getElementById(screenId).classList.add('active-screen');
            window.scrollTo(0, 0);
        }

        function openSMS() {
            const phoneNumber = "010-8843-0566";
            const message = "ì•ˆë…•í•˜ì„¸ìš”, ë¹„ì í€˜ìŠ¤íŠ¸ ì›¹ì‚¬ì´íŠ¸ë¥¼ í†µí•´ ìƒë‹´ ë¬¸ì˜ë“œë¦½ë‹ˆë‹¤. ì œê²Œ ë§ëŠ” ë¹„ìì™€ ì ˆì°¨ë¥¼ ì•ˆë‚´ë°›ê³  ì‹¶ìŠµë‹ˆë‹¤.";
            window.location.href = `sms:${phoneNumber}?body=${encodeURIComponent(message)}`;
        }

        // í­ì£½ í„°íŠ¸ë¦¬ê¸° í•¨ìˆ˜ (ì„±ê³µ/ì™„ë£Œ ì‹œ)
        function shootConfetti() {
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, colors: ['#ffbe76', '#ff7979', '#badc58', '#22a6b3'] });
        }

        // --- í€´ì¦ˆ ë¡œì§ ---
        const logicTree = {
            q1: { text: "ğŸ¢ í•œêµ­ì—ì„œ ì·¨ì—…í•˜ì—¬ ëˆì„ ë²Œ(ì˜ë¦¬í™œë™) ê³„íšì´ ìˆìœ¼ì‹ ê°€ìš”?", O: "q_work_expert", X: "q_marry", progress: 20 },
            q_work_expert: { text: "ğŸ“ í•™ì‚¬ ì´ìƒì˜ í•™ìœ„ê°€ ìˆê±°ë‚˜, ì¢…ì‚¬í•˜ë ¤ëŠ” ë¶„ì•¼ì— 5ë…„ ì´ìƒì˜ ê²½ë ¥ì´ ìˆìŠµë‹ˆê¹Œ?", O: "res_e7", X: "res_e9", progress: 50 },
            q_marry: { text: "ğŸ’ í•œêµ­ì¸ ë°°ìš°ìì™€ í˜¼ì¸ ì‹ ê³ ë¥¼ í•˜ì…¨ê±°ë‚˜, ê³§ í•˜ì‹¤ ì˜ˆì •ì¸ê°€ìš”?", O: "res_f6", X: "q_study", progress: 50 },
            q_study: { text: "ğŸ“š í•œêµ­ì˜ ëŒ€í•™êµë‚˜ ëŒ€í•™ì›ì—ì„œ ì •ê·œ ê³¼ì •ì„ ë°Ÿì„ ì˜ˆì •ì¸ê°€ìš”?", O: "res_d2", X: "res_etc", progress: 80 }
        };

        const results = {
            res_e7: { name: "E-7 / F-2-7 (ìš°ìˆ˜ì¸ì¬)", desc: "âœ¨ ë›°ì–´ë‚œ ì „ë¬¸ì„±ì„ ê°–ì¶˜ ì¸ì¬ì‹œêµ°ìš”!<br><br>ì¼ì • ìš”ê±´ì„ ê°–ì¶”ë©´ <b>F-2-7 ê±°ì£¼ ë¹„ì</b>ë¡œ ë°”ë¡œ ì „í™˜í•  ìˆ˜ ìˆëŠ” ê°€ì¥ ìœ ë¦¬í•œ ë£¨íŠ¸ì…ë‹ˆë‹¤.", showCalc: true },
            res_e9: { name: "E-9 (ë¹„ì „ë¬¸ì·¨ì—…) ë“±", desc: "ì œì¡°ì—…, ë†ì—… ë“±ì—ì„œ ì¼í•  ìˆ˜ ìˆëŠ” ì·¨ì—… ë¹„ìê°€ ì í•©í•©ë‹ˆë‹¤. ê³ ìš©í—ˆê°€ì œ ë“± ë³µì¡í•œ ì ˆì°¨ê°€ í•„ìš”í•©ë‹ˆë‹¤.", showCalc: false },
            res_f6: { name: "F-6 (ê²°í˜¼ì´ë¯¼)", desc: "í•œêµ­ì¸ ë°°ìš°ìì™€ í•¨ê»˜ ì •ì°©í•˜ê¸° ìœ„í•œ ë¹„ìì…ë‹ˆë‹¤.<br><br>ì†Œë“, ì£¼ê±°, ì˜ì‚¬ì†Œí†µ ë“± ì…ì¦ ì„œë¥˜ê°€ ê¹Œë‹¤ë¡œìš´ í¸ì…ë‹ˆë‹¤.", showCalc: false },
            res_d2: { name: "D-2 (ìœ í•™) / D-4 (ì¼ë°˜ì—°ìˆ˜)", desc: "í•™ì—…ì„ ìœ„í•œ ë¹„ìì…ë‹ˆë‹¤. ì¡¸ì—… í›„ êµ¬ì§ ë¹„ì(D-10)ë¥¼ ê±°ì³ ì·¨ì—… ë¹„ìë¡œ ì „í™˜í•˜ëŠ” ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤.", showCalc: false },
            res_etc: { name: "ë§ì¶¤í˜• ì‹¬ì¸µ ìƒë‹´ í•„ìš”", desc: "ìƒí™©ì— ë§ëŠ” ë‹¤ì–‘í•œ ë¹„ìê°€ ì¡´ì¬í•©ë‹ˆë‹¤. í–‰ì •ì‚¬ì™€ì˜ 1:1 ìƒë‹´ì„ í†µí•´ ê°€ì¥ ë¹ ë¥´ê³  ì•ˆì „í•œ ê¸¸ì„ ì°¾ì•„ë³´ì„¸ìš”.", showCalc: false }
        };

        let currentStep = "q1";

        function startQuiz() {
            currentStep = "q1";
            document.getElementById('question-text').innerText = logicTree[currentStep].text;
            
            // í•µì‹¬: 0%ë¡œ ì´ˆê¸°í™” í›„ ì•½ê°„ì˜ ì§€ì—° ë’¤ì— 1ë²ˆ ì§ˆë¬¸ ì§„í–‰ë„ë¡œ ë¶€ë“œëŸ½ê²Œ ì±„ì›€
            const bar = document.getElementById('progress-bar');
            bar.style.width = '0%';
            setTimeout(() => { bar.style.width = logicTree[currentStep].progress + '%'; }, 100);
            
            showScreen('quiz-screen');
        }

        function answerQuiz(choice) {
            const nextStep = logicTree[currentStep][choice];
            if (nextStep.startsWith("res_")) {
                document.getElementById('progress-bar').style.width = '100%';
                setTimeout(() => {
                    showQuizResult(nextStep);
                    shootConfetti(); // ê²°ê³¼ í™”ë©´ ë„˜ì–´ê°ˆ ë•Œ í­ì£½ í‘!
                }, 400); 
            } else {
                currentStep = nextStep;
                document.getElementById('question-text').innerText = logicTree[currentStep].text;
                document.getElementById('progress-bar').style.width = logicTree[currentStep].progress + '%';
            }
        }

        function showQuizResult(resKey) {
            const resData = results[resKey];
            document.getElementById('visa-name').innerHTML = resData.name;
            document.getElementById('visa-desc').innerHTML = resData.desc;
            
            document.getElementById('go-calc-btn').style.display = resData.showCalc ? "block" : "none";
            showScreen('result-screen');
        }

        // --- ê³„ì‚°ê¸° ë¡œì§ ---
        function calculateScore() {
            const ageScore = parseInt(document.getElementById('age').value) || 0;
            const eduScore = parseInt(document.getElementById('edu').value) || 0;
            const topikScore = parseInt(document.getElementById('topik').value) || 0;
            const kiipScore = parseInt(document.getElementById('kiip').value) || 0;
            const koreanScore = Math.max(topikScore, kiipScore);

            const incomeInput = parseInt(document.getElementById('income').value) || 0;
            const GNI = 44000000; 
            let incomeScore = 0;

            if (incomeInput >= GNI * 3) { incomeScore = 60; } 
            else if (incomeInput >= GNI * 2) { incomeScore = 50; } 
            else if (incomeInput >= GNI * 1.5) { incomeScore = 40; } 
            else if (incomeInput >= GNI * 1) { incomeScore = 30; } 
            else { incomeScore = 10; }

            const totalScore = ageScore + eduScore + koreanScore + incomeScore;

            const resultBox = document.getElementById('calc-result-box');
            resultBox.style.display = 'block';

            document.getElementById('total-score').innerText = totalScore;

            const messageDisplay = document.getElementById('calc-message');
            if (totalScore >= 80) {
                messageDisplay.innerHTML = '<span class="pass">ğŸ‰ ë¯¸ì…˜ í´ë¦¬ì–´! 80ì ì„ ë„˜ì—ˆìŠµë‹ˆë‹¤.</span><br><br><span style="font-size:16px; color:#555;">ì „ë¬¸ê°€ì™€ í•¨ê»˜ ì™„ë²½í•œ ì„œë¥˜ë¥¼ ì¤€ë¹„í•´ ë³´ì„¸ìš”!</span>';
                shootConfetti(); // í•©ê²© ì ìˆ˜ì¼ ë•Œë„ í­ì£½ í‘!
            } else {
                messageDisplay.innerHTML = `<span class="fail">ì•—, ${80 - totalScore}ì ì´ ë¶€ì¡±í•˜ë„¤ìš”.</span><br><br><span style="font-size:16px; color:#555;">ìˆ¨ê²¨ì§„ ê°€ì ì„ ì°¾ê±°ë‚˜ ì „ëµì„ ìˆ˜ì •í•˜ê¸° ìœ„í•´ ìƒë‹´ì„ ë°›ì•„ë³´ì„¸ìš”.</span>`;
            }
        }

        // ìµœì´ˆ ì‹¤í–‰
        startQuiz();
    </script>

</body>
</html>
