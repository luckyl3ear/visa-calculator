<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Visa Quest: Pro Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        /* [ì´ì „ ìŠ¤íƒ€ì¼ ìœ ì§€ ë° ê°•í™”] */
        body { font-family: 'Jua', sans-serif; margin: 0; padding: 20px; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); background-size: 200% 200%; animation: gradientBG 10s ease infinite; }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .app-container { background-color: #ffffff; width: 100%; max-width: 550px; padding: 35px; border-radius: 30px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); position: relative; }
        h2 { text-align: center; color: #1e272e; font-size: 26px; margin-bottom: 20px; }
        
        /* âœˆï¸ 0% ë¦¬ì–¼ ìŠ¤íƒ€íŠ¸ ì§„í–‰ ë°” */
        .progress-container { width: 100%; background-color: #d2dae2; border-radius: 20px; margin-bottom: 30px; height: 14px; position: relative; }
        .progress-bar { height: 100%; background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%); width: 0%; border-radius: 20px; transition: width 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; }
        .progress-bar::after { content: 'âœˆï¸'; position: absolute; right: -15px; top: -14px; font-size: 28px; }

        /* [ë²„íŠ¼ ë° ì§ˆë¬¸ë°•ìŠ¤ ìŠ¤íƒ€ì¼] */
        .question-box { font-size: 22px; color: #2c3e50; min-height: 110px; margin-bottom: 25px; display: flex; align-items: center; justify-content: center; text-align: center; background: #f8efba; border-radius: 20px; padding: 20px; border: 3px solid #e1b12c; animation: float 3s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-5px); } 100% { transform: translateY(0px); } }
        .btn-group { display: flex; gap: 15px; }
        .ox-btn { flex: 1; padding: 25px 0; font-size: 30px; font-family: 'Jua', sans-serif; border: none; border-radius: 15px; cursor: pointer; transition: 0.1s; position: relative; }
        .ox-btn:active { top: 6px; box-shadow: none !important; }
        .btn-o { background-color: #c7ecee; color: #22a6b3; box-shadow: 0 8px 0 #7ed6df; border: 2px solid #22a6b3; }
        .btn-x { background-color: #ffcccc; color: #eb4d4b; box-shadow: 0 8px 0 #ff7979; border: 2px solid #eb4d4b; }
        .btn { width: 100%; padding: 18px; border: none; font-size: 20px; font-family: 'Jua', sans-serif; cursor: pointer; border-radius: 15px; margin-top: 15px; position: relative; }
        .consult-btn { background-color: #05c46b; color: white; box-shadow: 0 6px 0 #038a4b; }
        .action-btn { background-color: #0fbcf9; color: white; box-shadow: 0 6px 0 #0a86b3; }
        .secondary-btn { background-color: #d2dae2; color: #485460; box-shadow: 0 6px 0 #808e9b; }

        /* [ê²°ê³¼ ë° ê³„ì‚°ê¸° ìŠ¤íƒ€ì¼] */
        .visa-badge { display: block; background: #f0932b; color: white; padding: 12px 20px; border-radius: 20px; font-size: 28px; margin: 20px auto; text-align: center; width: fit-content; }
        .desc { font-size: 17px; color: #3d3d3d; line-height: 1.6; background: #f1f2f6; padding: 20px; border-radius: 15px; text-align: left; }
        .screen { display: none; }
        .active-screen { display: block; }
        .form-group { margin-bottom: 15px; text-align: left; }
        select, input { width: 100%; padding: 14px; font-size: 16px; font-family: 'Jua', sans-serif; border-radius: 12px; border: 2px solid #dcdde1; }
        .calc-result { margin-top: 20px; padding: 20px; background-color: #e1fbef; border-radius: 15px; text-align: center; border: 3px solid #20bf6b; display: none; }
    </style>
</head>
<body>

<div class="app-container">
    <div id="quiz-screen" class="screen active-screen">
        <h2>ğŸ—ºï¸ ë¹„ì ì •ì°© ëŒ€ëª¨í—˜ (ì‹¬ì¸µ ì§„ë‹¨)</h2>
        <div class="progress-container"><div class="progress-bar" id="progress-bar"></div></div>
        <div class="question-box" id="question-text">í€˜ìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤!</div>
        <div class="btn-group">
            <button class="ox-btn btn-o" onclick="answerQuiz('O')">â­• ì˜ˆ</button>
            <button class="ox-btn btn-x" onclick="answerQuiz('X')">âŒ ì•„ë‹ˆì˜¤</button>
        </div>
    </div>

    <div id="result-screen" class="screen">
        <h2>ğŸ‰ ì§„ë‹¨ ì™„ë£Œ!</h2>
        <div class="visa-badge" id="visa-name">ê²°ê³¼</div>
        <div class="desc" id="visa-desc">ì„¤ëª…</div>
        <button id="go-calc-btn" class="btn action-btn" style="display: none;" onclick="showScreen('calc-screen')">ğŸ“Š ë‚´ F-2-7 ì ìˆ˜ ê³„ì‚°í•´ë³´ê¸°</button>
        <button class="btn consult-btn" onclick="openSMS()">ğŸ’¬ ê¹€ë™í˜„ í–‰ì •ì‚¬ì™€ ë¬¸ì ìƒë‹´</button>
        <button class="btn secondary-btn" onclick="startQuiz()">ğŸ”„ ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
    </div>

    <div id="calc-screen" class="screen">
        <h2>ğŸ† F-2-7 ì ìˆ˜ ì±Œë¦°ì§€</h2>
        <div class="form-group"><label>1. ì—°ë ¹</label><select id="age"><option value="0">ì„ íƒ</option><option value="25">25~34ì„¸(25)</option><option value="23">18~24, 35~39(23)</option><option value="20">40~44(20)</option><option value="3">51ì„¸~(3)</option></select></div>
        <div class="form-group"><label>2. í•™ë ¥</label><select id="edu"><option value="0">ì„ íƒ</option><option value="25">ë°•ì‚¬(25)</option><option value="20">ì„ì‚¬(20)</option><option value="15">í•™ì‚¬(15)</option></select></div>
        <div class="form-group"><label>3. í•œêµ­ì–´ ëŠ¥ë ¥</label><select id="topik"><option value="0">TOPIK ì„ íƒ</option><option value="20">5ê¸‰â†‘(20)</option><option value="15">4ê¸‰(15)</option><option value="10">3ê¸‰(10)</option></select></div>
        <div class="form-group"><label>4. ì—°ì†Œë“(ì›)</label><input type="number" id="income" placeholder="ì˜ˆ: 45000000"></div>
        <button class="btn action-btn" onclick="calculateScore()">ğŸ¯ ê²°ê³¼ ë³´ê¸°</button>
        <div class="calc-result" id="calc-result-box"><h3>ì´ì : <span id="total-score">0</span>ì </h3><p id="calc-message"></p></div>
        <button class="btn consult-btn" onclick="openSMS()">ğŸ’¬ ê²°ê³¼ë¡œ ë¬¸ì ìƒë‹´</button>
        <button class="btn secondary-btn" onclick="showScreen('result-screen')">ğŸ”™ ëŒì•„ê°€ê¸°</button>
    </div>
</div>

<script>
    const logicTree = {
        start: { text: "ê³¼ê±°ì— í•œêµ­ êµ­ì ì„ ê°€ì¡Œì—ˆê±°ë‚˜, ë¶€ëª¨ë‹˜/ì¡°ë¶€ëª¨ë‹˜ ì¤‘ í•œêµ­ êµ­ì ìê°€ ìˆë‚˜ìš”?", O: "res_f4", X: "q_long_stay" },
        q_long_stay: { text: "ì´ë¯¸ í•œêµ­ì— 5ë…„ ì´ìƒ ê±°ì£¼í•˜ì…¨ê³ , ì•ìœ¼ë¡œ í‰ìƒ ì‚´ ê³„íšì¸ê°€ìš”?", O: "res_f5", X: "q_work" },
        q_work: { text: "í•œêµ­ì—ì„œ ì¼ì„ í•´ì„œ ëˆì„ ë²Œ ê³„íšì´ì‹ ê°€ìš”?", O: "q_expert", X: "q_marry" },
        q_expert: { text: "ì „ë¬¸ì§(í•™ì‚¬ ì´ìƒ/ê³ ìˆ™ë ¨ ê¸°ìˆ ) ì¢…ì‚¬ìì´ì‹ ê°€ìš”?", O: "q_high_income", X: "res_e9" },
        q_high_income: { text: "ì—°ë´‰ì´ í•œêµ­ í‰ê· (GNI)ë³´ë‹¤ ë†’ê±°ë‚˜ ì ìˆ˜ê°€ 80ì  ì´ìƒì¼ê¹Œìš”?", O: "res_f27", X: "res_e7" },
        q_marry: { text: "í•œêµ­ì¸ê³¼ ê²°í˜¼í•˜ì…¨ê±°ë‚˜ ê³§ ê²°í˜¼í•  ì˜ˆì •ì¸ê°€ìš”?", O: "res_f6", X: "q_invest" },
        q_invest: { text: "í•œêµ­ì— 1ì–µ ì› ì´ìƒì˜ ì‚¬ì—… ìê¸ˆì„ íˆ¬ìí•˜ì‹¤ ìˆ˜ ìˆë‚˜ìš”?", O: "res_d89", X: "q_study" },
        q_study: { text: "ì •ê·œ ëŒ€í•™/ëŒ€í•™ì›ì—ì„œ ê³µë¶€ë¥¼ í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?", O: "res_d2", X: "res_etc" }
    };

    const results = {
        res_f4: { name: "F-4 (ì¬ì™¸ë™í¬)", desc: "ë™í¬ë¶„ë“¤ì„ ìœ„í•œ ê°€ì¥ ììœ ë¡œìš´ ë¹„ìì…ë‹ˆë‹¤. ê±°ì£¼ ë° ì·¨ì—… í™œë™ì— ì œì•½ì´ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.", showCalc: false },
        res_f5: { name: "F-5 (ì˜ì£¼ê¶Œ)", desc: "í•œêµ­ì— ì˜êµ¬íˆ ê±°ì£¼í•  ìˆ˜ ìˆëŠ” ë¹„ìì…ë‹ˆë‹¤. ì—„ê²©í•œ ì†Œë“ê³¼ í’ˆí–‰ ìš”ê±´ì´ í•„ìš”í•˜ë¯€ë¡œ ì „ë¬¸ê°€ ìƒë‹´ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.", showCalc: false },
        res_f27: { name: "F-2-7 (ê±°ì£¼)", desc: "ìš°ìˆ˜ì¸ì¬ë¥¼ ìœ„í•œ ì ìˆ˜ì œ ë¹„ìì…ë‹ˆë‹¤. ììœ ë¡œìš´ ì´ì§ê³¼ ì²´ë¥˜ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì§€ê¸ˆ ì ìˆ˜ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”!", showCalc: true },
        res_e7: { name: "E-7 (íŠ¹ì •í™œë™)", desc: "ì „ë¬¸ ì¸ë ¥ì„ ìœ„í•œ ì·¨ì—… ë¹„ìì…ë‹ˆë‹¤. ê³ ìš© ê³„ì•½ê³¼ í•™ìœ„ ë“± ë³µì¡í•œ ì„œë¥˜ ì…ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.", showCalc: false },
        res_e9: { name: "E-9 (ë¹„ì „ë¬¸ì·¨ì—…)", desc: "ê³ ìš©í—ˆê°€ì œë¥¼ í†µí•œ ì·¨ì—… ë¹„ìì…ë‹ˆë‹¤. ì§€ì •ëœ ì—…ì¢…ì—ì„œë§Œ ê·¼ë¬´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.", showCalc: false },
        res_f6: { name: "F-6 (ê²°í˜¼ì´ë¯¼)", desc: "í•œêµ­ì¸ ë°°ìš°ìì™€ ì •ì°©í•˜ê¸° ìœ„í•œ ë¹„ìì…ë‹ˆë‹¤. í˜¼ì¸ì˜ ì§„ì •ì„± ì…ì¦ì´ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤.", showCalc: false },
        res_d89: { name: "D-8 / D-9 (íˆ¬ì/ë¬´ì—­)", desc: "ê¸°ì—… íˆ¬ìë‚˜ ë¬´ì—­ ê²½ì˜ì„ ìœ„í•œ ë¹„ìì…ë‹ˆë‹¤. ìê¸ˆ ì¶œì²˜ì™€ ì‚¬ì—… ì‹¤ì  ì¦ë¹™ì´ í•µì‹¬ì…ë‹ˆë‹¤.", showCalc: false },
        res_d2: { name: "D-2 / D-4 (ìœ í•™/ì—°ìˆ˜)", desc: "ê³µë¶€ë¥¼ ìœ„í•œ ë¹„ìì…ë‹ˆë‹¤. ì¡¸ì—… í›„ ì·¨ì—… ë¹„ìë¡œ ì—°ê²°í•˜ëŠ” ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤.", showCalc: false },
        res_etc: { name: "ìƒì„¸ ìƒë‹´ í•„ìš”", desc: "ê³ ê°ë‹˜ì˜ ìƒí™©ì€ ë§¤ìš° íŠ¹ìˆ˜í•©ë‹ˆë‹¤. í–‰ì •ì‚¬ë‹˜ê³¼ ì§ì ‘ ìƒë‹´í•˜ì—¬ ë§ì¶¤ ë¹„ìë¥¼ ì°¾ì•„ë³´ì„¸ìš”.", showCalc: false }
    };

    let currentStep = "start";
    let stepCount = 0;
    const maxSteps = 5; // ì§ˆë¬¸ ë‹¨ê³„ ìˆ˜ (ìœ ë™ì ì´ë‚˜ ë°” ì§„í–‰ì„ ìœ„í•´ ì„¤ì •)

    function startQuiz() {
        currentStep = "start";
        stepCount = 0;
        const bar = document.getElementById('progress-bar');
        bar.style.width = '0%'; // 0% ë¦¬ì–¼ ìŠ¤íƒ€íŠ¸
        document.getElementById('question-text').innerText = logicTree[currentStep].text;
        showScreen('quiz-screen');
    }

    function answerQuiz(choice) {
        const nextStep = logicTree[currentStep][choice];
        stepCount++;
        
        // ë°” ì§„í–‰ë„ ê³„ì‚° (0%ì—ì„œ ì‹œì‘í•´ ì§ˆë¬¸ë§ˆë‹¤ ëŠ˜ì–´ë‚¨)
        let progress = Math.min((stepCount / maxSteps) * 100, 90);
        document.getElementById('progress-bar').style.width = progress + '%';

        if (nextStep.startsWith("res_")) {
            document.getElementById('progress-bar').style.width = '100%';
            setTimeout(() => {
                showQuizResult(nextStep);
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            }, 600);
        } else {
            currentStep = nextStep;
            document.getElementById('question-text').innerText = logicTree[currentStep].text;
        }
    }

    function showQuizResult(resKey) {
        const resData = results[resKey];
        document.getElementById('visa-name').innerText = resData.name;
        document.getElementById('visa-desc').innerHTML = resData.desc;
        document.getElementById('go-calc-btn').style.display = resData.showCalc ? "block" : "none";
        showScreen('result-screen');
    }

    function showScreen(screenId) {
        document.querySelectorAll('.screen').forEach(el => el.classList.remove('active-screen'));
        document.getElementById(screenId).classList.add('active-screen');
    }

    function openSMS() {
        window.location.href = `sms:010-8843-0566?body=${encodeURIComponent("ë¹„ì í€˜ìŠ¤íŠ¸ ì§„ë‹¨ ê²°ê³¼ ìƒë‹´ ìš”ì²­ë“œë¦½ë‹ˆë‹¤.")}`;
    }

    function calculateScore() {
        const score = (parseInt(document.getElementById('age').value)||0) + (parseInt(document.getElementById('edu').value)||0) + (parseInt(document.getElementById('topik').value)||0);
        const income = parseInt(document.getElementById('income').value)||0;
        const total = score + (income >= 44000000 ? 30 : 10);
        document.getElementById('calc-result-box').style.display = 'block';
        document.getElementById('total-score').innerText = total;
        document.getElementById('calc-message').innerText = total >= 80 ? "ğŸ‰ ì„±ê³µ! ìš°ìˆ˜ì¸ì¬ ìš”ê±´ì— ê·¼ì ‘í•©ë‹ˆë‹¤." : "ì•—! ì¡°ê¸ˆ ë” ì ìˆ˜ê°€ í•„ìš”í•´ìš”.";
        if(total >= 80) confetti({ particleCount: 100, spread: 50 });
    }

    startQuiz();
</script>
</body>
</html>
